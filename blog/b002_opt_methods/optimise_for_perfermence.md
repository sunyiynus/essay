#### 性能

CAN总线的硬件



### can协议栈性能优化：
#### 1. 业务背景
毫米波雷达的目标点云数据，需要发送到CAN总线上，周期为50ms。数据大小为16个CANFD报文。32个目标。
数据流：ALG -> 中间件 -> CANIF

#### 数据传输
为了实现速度：
1. 在Autosar中RTE有IOC机制来传输数据，其使用的是共享内存。在TC3XX系列的芯片上，DLUM SRAM模块通过ISR总线来访问。
2. 在发送到CAN总线上，会使用CAN send comfirm interrupt中断来启动后续15帧报文发送。这样能保证后续的报文报文周期稳定。
3. CAN ID以0x2xx可以报文，在总线上有较高的优先级。


为了保障数据一致性：
1. SpinLock保证数据互斥访问。


### ETH协议栈发送激光雷达点云数据

激光报文和雷达报文的区别，数据大，实时性要求更高。

异构架构对数据传输的影响

1. DMA报文数据传输，共享一块1G RAM，然后使用DMA传输数据到特定地址。


如何确保数据一致性？在这种不同CPU之间。   
[TDA4VM: MCU和DSP之间的内存共享以及数据同步](https://e2echina.ti.com/support/processors/f/processors-forum/794513/tda4vm-mcu-dsp)



#### 常见系统优化方向：

1. 使用硬件特性
- 使用DMA内存
- 使用专用加速硬件HSM加密模块
- ISR中断

2. 软件层面
- 大的方向区分IO任务还是计算任务。
- 




#### 性能优化技巧

1. 使用多级缓存buffer，适用的场景。





